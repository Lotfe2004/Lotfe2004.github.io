<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="utf-8">
<title>التجمعات السكنية – Ramallah</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">

<style>
body { margin:0; font-family: Arial; }
#map { height:100vh; }
</style>
</head>

<body>

<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
// =======================
// إنشاء الخريطة
// =======================
var map = L.map("map").setView([31.9, 35.2], 11);

// خريطة الأساس
L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
  attribution: "© OpenStreetMap"
}).addTo(map);

// =======================
// تحميل التجمعات السكنية
// =======================
fetch("tgmooat.json")
.then(res => res.json())
.then(data => {

  L.geoJSON(data, {
    style: {
      color: "#333",
      weight: 1,
      fillColor: "#f4a261",
      fillOpacity: 0.6
    },

    onEachFeature: function (feature, layer) {

      // قراءة اسم التجمع من أي حقل موجود
      var p = feature.properties || {};

      var name =
        p.name ||
        p.NAME ||
        p.Name ||
        p.village ||
        p.Village ||
        p.arabic ||
        p.Arabic ||
        p.ar_name ||
        "غير معروف";

      // Popup
      var popupContent = `
        <b>تجمع سكني</b><hr>
        <b>الاسم:</b> ${name}<br>
      `;

      layer.bindPopup(popupContent);
    }
  }).addTo(map);

})
.catch(err => {
  alert("خطأ في تحميل ملف التجمعات");
  console.error(err);
});
</script>

</body>
</html>
